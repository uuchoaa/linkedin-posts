<div class="w-full max-w-3xl">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold">Write Post: <%= @post.title %></h1>
    <div class="space-x-2">
      <%= link_to "Back", @post, class: "rounded-lg bg-gray-200 px-4 py-2 hover:bg-gray-300" %>
    </div>
  </div>

  <div class="mb-6 rounded-lg border border-gray-200 bg-gray-50 p-4">
    <h2 class="text-sm font-semibold text-gray-600 uppercase tracking-wide mb-3">Reference</h2>
    <dl class="space-y-3 text-sm">
      <% if @post.hook.present? %>
        <div>
          <dt class="font-medium text-gray-500">Hook</dt>
          <dd class="mt-0.5 text-gray-900"><%= @post.hook %></dd>
        </div>
      <% end %>
      <% if @post.content_summary.present? %>
        <div>
          <dt class="font-medium text-gray-500">Content Summary</dt>
          <dd class="mt-0.5 text-gray-900 whitespace-pre-wrap"><%= @post.content_summary %></dd>
        </div>
      <% end %>
      <% if @post.senior_insight.present? %>
        <div>
          <dt class="font-medium text-gray-500">Senior Insight</dt>
          <dd class="mt-0.5 text-gray-900"><%= @post.senior_insight %></dd>
        </div>
      <% end %>
      <% if @post.cta.present? %>
        <div>
          <dt class="font-medium text-gray-500">CTA</dt>
          <dd class="mt-0.5 text-gray-900"><%= @post.cta %></dd>
        </div>
      <% end %>
      <% if @post.hashtags.any? %>
        <div>
          <dt class="font-medium text-gray-500">Hashtags</dt>
          <dd class="mt-0.5 text-gray-900"><%= @post.hashtags.join(" ") %></dd>
        </div>
      <% end %>
    </dl>
  </div>

  <%= form_with model: @post, url: write_post_path(@post), method: :patch, class: "space-y-4" do |f| %>
    <% if @post.errors.any? %>
      <div class="rounded-lg bg-red-50 p-4 text-red-700">
        <h2 class="font-medium"><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>
        <ul class="mt-2 list-disc list-inside">
          <% @post.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div>
      <div class="flex justify-between items-center mb-1">
        <%= f.label :body, class: "block text-sm font-medium text-gray-700" %>
        <button type="button" class="inline-flex items-center gap-2 rounded-lg bg-violet-100 px-3 py-1.5 text-sm font-medium text-violet-700 hover:bg-violet-200" disabled>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z" />
          </svg>
          Write with AI
        </button>
      </div>
      <%= f.text_area :body, rows: 15, class: "w-full rounded border border-gray-300 px-3 py-2 font-mono text-sm", placeholder: "Write your LinkedIn post here..." %>
    </div>

    <div class="pt-4">
      <%= f.submit "Save body", class: "rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700" %>
    </div>
  <% end %>
</div>
